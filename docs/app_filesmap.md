# ğŸ—ºï¸ App ç›®å½•ç»“æ„æ·±åº¦è§£æå›¾ (App Directory Map)

æœ¬æ–‡æ¡£æ·±å…¥è§£æ Next.js App Router (`app/`) çš„æ¯ä¸€ä¸ªæ–‡ä»¶å’Œç›®å½•ã€‚è¿™æ˜¯æ•´ä¸ªé¡¹ç›®çš„æ ¸å¿ƒï¼ŒåŒ…å«äº†æ‰€æœ‰çš„é¡µé¢è·¯ç”±ã€API æ¥å£å’Œå…¨å±€é…ç½®ã€‚

## ğŸ  `app/` (æ ¹è·¯ç”±ç›®å½•)

è¿™æ˜¯ Next.js 13+ App Router çš„èµ·ç‚¹ã€‚

### ğŸ“„ æ ¹çº§æ–‡ä»¶
- **`layout.tsx`**
    - **é‡è¦æ€§**ï¼šâ­â­â­â­â­ (Root Layout)
    - **ä½œç”¨**ï¼šåº”ç”¨çš„**æœ€å¤–å±‚å¸ƒå±€**ã€‚å®ƒå¿…é¡»åŒ…å« `<html>` å’Œ `<body>` æ ‡ç­¾ã€‚é€šå¸¸ç”¨äºè®¾ç½®å…¨å±€å­—ä½“ã€å¼•å…¥å…¨å±€ CSSã€ä»¥åŠåŒ…è£¹å…¨å±€ Providers (å¦‚ `QueryProvider`, Clerk `ClerkProvider`)ã€‚
- **`not-found.tsx`**
    - **ä½œç”¨**ï¼šå…¨å±€ 404 é¡µé¢ã€‚å½“è®¿é—®ä¸å­˜åœ¨çš„è·¯ç”±æ—¶å±•ç¤ºçš„è‡ªå®šä¹‰ UIã€‚
- **`app.d.ts`**
    - **ä½œç”¨**ï¼šTypeScript å£°æ˜æ–‡ä»¶ï¼Œé€šå¸¸ç”¨äºæ‰©å±•æˆ–è¦†ç›– Next.js çš„é»˜è®¤ç±»å‹å®šä¹‰ã€‚
- **`QueryProvider.tsx`**
    - **ä½œç”¨**ï¼šå°è£… React Query (TanStack Query) çš„ Providerã€‚ç”¨äºåœ¨å®¢æˆ·ç«¯ç®¡ç†æœåŠ¡ç«¯çŠ¶æ€ï¼ˆç¼“å­˜ã€è·å–ã€åŒæ­¥ï¼‰ã€‚
- **`sitemap.ts`**
    - **ä½œç”¨**ï¼šåŠ¨æ€ç”Ÿæˆ `sitemap.xml` æ–‡ä»¶ã€‚ç”¨äº SEOï¼Œå‘Šè¯‰æœç´¢å¼•æ“ç½‘ç«™çš„æ‰€æœ‰å¯è®¿é—®é¡µé¢ã€‚
- **`globals.css`** / **`prism.css`** / **`clerk.css`**
    - **ä½œç”¨**ï¼šå…¨å±€æ ·å¼æ–‡ä»¶ã€‚`globals.css` åŒ…å« Tailwind çš„æŒ‡ä»¤ï¼›`prism.css` ç”¨äºä»£ç å—é«˜äº®ï¼›`clerk.css` ç”¨äºè¦†ç›– Clerk ç»„ä»¶çš„é»˜è®¤æ ·å¼ã€‚
- **é™æ€èµ„æº (Metadata Files)**
    - **`favicon.ico`, `icon.png`, `apple-icon.png`**: ç½‘ç«™å›¾æ ‡ã€‚
    - **`opengraph-image.png`, `twitter-image.png`**: ç¤¾äº¤åª’ä½“åˆ†äº«æ—¶çš„é»˜è®¤é¢„è§ˆå›¾ã€‚

---

## ğŸ§­ `app/(main)` (ä¸»ç«™å¸ƒå±€ç»„)

**Route Group (è·¯ç”±ç»„)**ï¼šä»¥æ‹¬å·åŒ…è£¹çš„æ–‡ä»¶å¤¹ `(name)` ä¸ä¼šå½±å“ URL è·¯å¾„ã€‚è¿™é‡Œçš„ `(main)` ç”¨äºå°†å…¬å…±ç½‘ç«™é¡µé¢ï¼ˆé¦–é¡µã€åšå®¢ã€å…³äºé¡µï¼‰ä¸åå°ç®¡ç†é¡µé¢ (`admin`) æˆ– CMS é¡µé¢ (`studio`) éš”ç¦»å¼€ï¼Œä»¥ä¾¿åº”ç”¨ä¸åŒçš„å¸ƒå±€ (`layout.tsx`)ã€‚

### ğŸ“„ å…±äº«ç»„ä»¶ (Layout & UI)
- **`layout.tsx`**
    - **ä½œç”¨**ï¼šä¸»ç«™çš„å¸ƒå±€æ–‡ä»¶ã€‚åŒ…å«äº†æ‰€æœ‰å…¬å¼€é¡µé¢å…±äº«çš„ Header (å¯¼èˆªæ ) å’Œ Footer (é¡µè„š)ã€‚
- **`Header.tsx`**, **`Footer.tsx`**, **`NavigationBar.tsx`**
    - **ä½œç”¨**ï¼šé¡µé¢é¡¶éƒ¨å¯¼èˆªã€åº•éƒ¨ä¿¡æ¯æ ä»¥åŠå…·ä½“çš„å¯¼èˆªèœå•é€»è¾‘ã€‚
- **`ThemeProvider.tsx`**, **`ThemeSwitcher.tsx`**
    - **ä½œç”¨**ï¼šåŸºäº `next-themes` çš„æš—é»‘æ¨¡å¼/äº®è‰²æ¨¡å¼åˆ‡æ¢é€»è¾‘åŠä¸Šä¸‹æ–‡ã€‚

### ğŸ“„ é¦–é¡µ (`/`)
- **`page.tsx`**: ç½‘ç«™é¦–é¡µ (`cali.so/`)ã€‚
- **`Headline.tsx`**: é¦–é¡µçš„å¤§æ ‡é¢˜/Slogan ç»„ä»¶ã€‚
- **`Activity.tsx`**: å±•ç¤ºæœ€è¿‘åŠ¨æ€æˆ–çŠ¶æ€çš„ç»„ä»¶ã€‚
- **`Photos.tsx`**: é¦–é¡µå±•ç¤ºçš„ä¸ªäººæ‘„å½±æˆ–å›¾ç‰‡æµç»„ä»¶ã€‚
- **`Resume.tsx`**: ç®€å†æˆ–ç»å†æ¦‚è§ˆç»„ä»¶ã€‚

### ğŸ“‚ å­è·¯ç”± (Pages)

#### ğŸ“ `app/(main)/blog` (åšå®¢)
- **`page.tsx`**: åšå®¢åˆ—è¡¨é¡µ (`/blog`)ã€‚
- **`[slug]/`**: **åŠ¨æ€è·¯ç”±**ã€‚å¤„ç†å…·ä½“çš„æ–‡ç« è¯¦æƒ…é¡µ (å¦‚ `/blog/my-first-post`)ã€‚
- **`BlogPosts.tsx`**, **`BlogPostCard.tsx`**: åšå®¢åˆ—è¡¨çš„ UI ç»„ä»¶ã€‚
- **`BlogPostPage.tsx`**: æ–‡ç« è¯¦æƒ…é¡µçš„å…·ä½“ UI å®ç°ã€‚
- **`BlogReactions.tsx`**: æ–‡ç« çš„ç‚¹èµ/è¡¨æƒ…äº’åŠ¨ç»„ä»¶ã€‚
- **`BlogPostTableOfContents.tsx`**: æ–‡ç« ç›®å½• (TOC) ç»„ä»¶ã€‚
- **`blog-post.state.ts`**, **`BlogPostStateLoader.tsx`**: ç”¨äºç®¡ç†åšå®¢æ–‡ç« çŠ¶æ€ï¼ˆå¦‚é˜…è¯»é‡ã€ç‚¹èµæ•°ï¼‰çš„é€»è¾‘ï¼Œé€šå¸¸æ¶‰åŠ Valtio æˆ– React Contextã€‚

#### ğŸ’¬ `app/(main)/guestbook` (ç•™è¨€æ¿)
- **`page.tsx`**: ç•™è¨€æ¿é¡µé¢ (`/guestbook`)ã€‚
- **`Guestbook.tsx`**: ç•™è¨€æ¿ä¸»å®¹å™¨ç»„ä»¶ã€‚
- **`GuestbookInput.tsx`**: ç•™è¨€è¾“å…¥æ¡†ç»„ä»¶ï¼ˆéœ€ç™»å½•ï¼‰ã€‚
- **`GuestbookFeeds.tsx`**: ç•™è¨€åˆ—è¡¨å±•ç¤ºç»„ä»¶ã€‚
- **`guestbook.state.ts`**: ç•™è¨€æ¿çš„çŠ¶æ€ç®¡ç†é€»è¾‘ã€‚

#### ğŸ’¼ `app/(main)/projects` (é¡¹ç›®å±•ç¤º)
- **`page.tsx`**: é¡¹ç›®åˆ—è¡¨é¡µ (`/projects`)ã€‚
- **`Projects.tsx`**, **`ProjectCard.tsx`**: é¡¹ç›®åˆ—è¡¨åŠå¡ç‰‡ UI ç»„ä»¶ã€‚

#### ğŸ‘¤ `app/(main)/about` (å…³äº)
- **`page.tsx`**: ä¸ªäººä»‹ç»é¡µé¢ã€‚

#### ğŸ” `app/(main)/(auth)` (è®¤è¯)
- **`sign-in/`**, **`sign-up/`**: Clerk æä¾›çš„ç™»å½•å’Œæ³¨å†Œé¡µé¢è·¯ç”±ã€‚

#### ğŸ“¡ `app/(main)/feed.xml` (RSS)
- **`route.ts`** (æ¨æµ‹): ç”¨äºç”Ÿæˆ RSS è®¢é˜…æºçš„ API è·¯ç”±ã€‚

---

## ğŸ› ï¸ `app/admin` (ç®¡ç†åå°)

è¿™æ˜¯å—ä¿æŠ¤çš„åå°åŒºåŸŸï¼Œé€šå¸¸éœ€è¦ç®¡ç†å‘˜æƒé™æ‰èƒ½è®¿é—®ã€‚

- **`layout.tsx`**: åå°ä¸“ç”¨å¸ƒå±€ï¼Œå¯èƒ½åŒ…å«ä¾§è¾¹æ  (`Sidebar.tsx`)ã€‚
- **`Sidebar.tsx`**: åå°å¯¼èˆªèœå•ã€‚
- **`page.tsx`**: åå°ä»ªè¡¨ç›˜é¦–é¡µ (`/admin`)ã€‚
- **`comments/`**: è¯„è®ºç®¡ç†é¡µé¢ï¼Œç”¨äºå®¡æ ¸æˆ–åˆ é™¤è¯„è®ºã€‚

---

## ğŸ”Œ `app/api` (API è·¯ç”±)

è¿™é‡Œå­˜æ”¾æ‰€æœ‰çš„åç«¯æ¥å£ã€‚Next.js ä¼šå°†è¿™äº›æ–‡ä»¶æ˜ å°„ä¸º API ç«¯ç‚¹ (å¦‚ `/api/comments`)ã€‚

- **`activity/`**: è·å–ç”¨æˆ·æ´»åŠ¨æ•°æ®çš„æ¥å£ã€‚
- **`comments/`**: å¤„ç†è¯„è®ºçš„å¢åˆ æ”¹æŸ¥ã€‚
- **`guestbook/`**: å¤„ç†ç•™è¨€æ¿æ•°æ®çš„æ¥å£ã€‚
- **`reactions/`**: å¤„ç†ç‚¹èµã€è¡¨æƒ…äº’åŠ¨çš„æ¥å£ã€‚
- **`tweet/`**: è·å–æ¨æ–‡æ•°æ®çš„æ¥å£ï¼ˆå¯èƒ½ç”¨äºåµŒå…¥æ¨ç‰¹ï¼‰ã€‚
- **`link-preview/`**: ç”Ÿæˆé“¾æ¥é¢„è§ˆå…ƒæ•°æ®ï¼ˆOpen Graphï¼‰çš„æ¥å£ã€‚
- **`favicon/`**: è·å–å¤–éƒ¨ç½‘ç«™ Favicon çš„å·¥å…·æ¥å£ã€‚

---

## ğŸ¨ `app/studio` (Sanity CMS)

- **`[[...index]]/`**: **å…¨æ•è·è·¯ç”± (Catch-all Route)**ã€‚
    - è¿™æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„è·¯ç”±ï¼Œå®ƒåŠ è½½ Sanity Studio çš„å•é¡µåº”ç”¨ (SPA)ã€‚æ— è®ºä½ è®¿é—® `/studio`, `/studio/desk`, `/studio/vision`ï¼Œéƒ½ä¼šç”±è¿™é‡Œçš„ `page.tsx` å¤„ç†ï¼Œæ¸²æŸ“ CMS çš„ç®¡ç†ç•Œé¢ã€‚

---

## ğŸš« `app/blocked` (è®¿é—®å—é™)
- **`page.tsx`**: å½“ç”¨æˆ·è§¦å‘é˜²ç«å¢™è§„åˆ™æˆ–è¢« IP å°ç¦æ—¶å±•ç¤ºçš„é¡µé¢ã€‚

---
*Created by Gemini for Caliblog Project Documentation*
